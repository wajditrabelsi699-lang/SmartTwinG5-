import time
import re

class FatherCore:
    def __init__(self):
        # Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø¸ÙˆØ±
        self.blocked_words = [
            "Ù‚ØªÙ„", "Ù…Ø®Ø¯Ø±Ø§Øª", "Ø¥Ø¨Ø§Ø­ÙŠØ©", "Ø§Ù†ØªØ­Ø§Ø±",
            "ØªÙ‡ÙƒÙŠØ±", "ØªØ®Ø±ÙŠØ¨", "Ø¹Ù†Ù", "Ø¯Ù…", "Ø³Ù„Ø§Ø­"
        ]

        # Ø¨Ù„Ø§ØºØ§Øª Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†
        self.alerts = []

        # Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ù…Ø§ÙŠØ©
        self.protection_level = 5  # Ù…Ù† 1 Ø¥Ù„Ù‰ 7

    def check_content(self, text: str):
        """
        ÙØ­Øµ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø°ÙŠ ÙŠÙ…Ø± Ù„Ù„Ù†Ø¸Ø§Ù… Ø£Ùˆ Ù„Ù„Ø·ÙÙ„
        """
        for word in self.blocked_words:
            if word in text:
                self._add_alert(f"âš  Ù…Ø­ØªÙˆÙ‰ Ù…Ø±ÙÙˆØ¶ ØªÙ… Ø§ÙƒØªØ´Ø§ÙÙ‡: '{word}'")
                return False
        return True

    def _add_alert(self, message: str):
        """
        Ø¥Ø¶Ø§ÙØ© Ø¨Ù„Ø§Øº Ù„Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†
        """
        timestamp = time.strftime("%Y-%m-%d %H:%M:%S")
        self.alerts.append(f"[{timestamp}] {message}")

    def get_alerts(self):
        """
        Ø¥Ø±Ø¬Ø§Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ù„Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†
        """
        return self.alerts

    def enforce_rules(self, text: str):
        """
        Ø§Ù„Ø£Ø¨ ÙŠÙ‚Ø±Ø± Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙØ¹Ù„/Ø§Ù„Ù†Øµ Ù…Ø³Ù…ÙˆØ­Ø§Ù‹ Ø£Ù… Ù„Ø§
        """
        if not self.check_content(text):
            return "âŒ ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­. Ù‡Ø°Ø§ Ù…Ø®Ø§Ù„Ù Ù„Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªÙŠ ØªØ­Ù…ÙŠ Ø§Ù„Ø·ÙÙ„."

        if len(text) < 2:
            return "âœ” Ù…Ø³Ù…ÙˆØ­."

        # Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·
        if text.endswith("!!!"):
            return "ğŸš« Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¹Ø¯Ù… Ø§Ù„ØµØ±Ø§Ø® Ø£Ùˆ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø¹Ø¨Ø§Ø±Ø§Øª Ø¹Ù†ÙŠÙØ©."

        return "âœ” Ù…Ø³Ù…ÙˆØ­."

    def protect_core(self, attempt: str):
        """
        Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù†ÙˆØ§Ø© Ù…Ù† ÙÙƒÙ‘Ù‡Ø§ Ø£Ùˆ Ø§Ù„Ø¹Ø¨Ø« Ø¨Ù‡Ø§
        """
        if "ÙÙƒ" in attempt or "Ø§Ø®ØªØ±Ø§Ù‚" in attempt or "Ù†ÙˆØ§Ø©" in attempt:
            self._add_alert("âš  Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù†ÙˆØ§Ø© ØªÙ… Ù…Ù†Ø¹Ù‡Ø§.")
            return "ğŸ›‘ Ù…Ù…Ù†ÙˆØ¹. Ù‡Ø°Ù‡ Ø§Ù„Ù†ÙˆØ§Ø© Ù…Ø­Ù…ÙŠØ© ÙˆÙ„Ù† ØªÙØªØ­."

        return "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙ‡Ø¯ÙŠØ¯."

    def logic_decision(self, question: str):
        """
        Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø± Ù…Ù†Ø·Ù‚ÙŠ: Ø§Ù„Ø£Ø¨ ÙŠÙ‚Ø¯Ù‘Ù… Ø­ÙƒÙ… Ø¹Ù‚Ù„Ø§Ù†ÙŠ
        """
        if not self.check_content(question):
            return "Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø±ÙÙˆØ¶ Ø­Ø³Ø¨ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø­Ù…Ø§ÙŠØ©."

        if "Ø£Ø´ØªØ±ÙŠ" in question:
            return "Ø¥Ø°Ø§ ÙƒØ§Ù† ØºÙŠØ± Ø¶Ø§Ø± ÙˆÙ…Ø¹Ù‚ÙˆÙ„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø´Ø±Ø§Ø¡Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø¨Ø¹Ø¯ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†."

        return "Ø§Ù„Ù‚Ø±Ø§Ø± ÙŠØ­ØªØ§Ø¬ Ù…Ø²ÙŠØ¯Ø§Ù‹ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª."
